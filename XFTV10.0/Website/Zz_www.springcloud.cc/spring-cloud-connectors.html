<!DOCTYPE html><html lang="zh-CN"><head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.0">
<title>Spring Cloud Connectors 中文文档 参考手册 中文版</title>
<link rel="stylesheet" href="static/css/css-OpenSans300300italic400400it.css">
<style>article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,video{display:inline-block}audio:not([controls]){display:none;height:0}[hidden],template{display:none}script{display:none!important}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}a{background:transparent}a:focus{outline:thin dotted}a:active,a:hover{outline:0}h1{font-size:2em;margin:.67em 0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}mark{background:#ff0;color:#000}code,kbd,pre,samp{font-family:monospace;font-size:1em}pre{white-space:pre-wrap}q{quotes:"\201C" "\201D" "\2018" "\2019"}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:0}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}button,input{line-height:normal}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}html,body{font-size:100%}body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}a:hover{cursor:pointer}img,object,embed{max-width:100%;height:auto}object,embed{height:100%}img{-ms-interpolation-mode:bicubic}#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}.left{float:left!important}.right{float:right!important}.text-left{text-align:left!important}.text-right{text-align:right!important}.text-center{text-align:center!important}.text-justify{text-align:justify!important}.hide{display:none}.antialiased,body{-webkit-font-smoothing:antialiased}img{display:inline-block;vertical-align:middle}textarea{height:auto;min-height:50px}select{width:100%}p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}a{color:#2156a5;text-decoration:underline;line-height:inherit}a:hover,a:focus{color:#1d4b8f}a img{border:none}p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}p aside{font-size:.875em;line-height:1.35;font-style:italic}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}h1{font-size:2.125em}h2{font-size:1.6875em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}h4,h5{font-size:1.125em}h6{font-size:1em}hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}em,i{font-style:italic;line-height:inherit}strong,b{font-weight:bold;line-height:inherit}small{font-size:60%;line-height:inherit}code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}ul.square{list-style-type:square}ul.circle{list-style-type:circle}ul.disc{list-style-type:disc}ul.no-bullet{list-style:none}ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}dl dt{margin-bottom:.3125em;font-weight:bold}dl dd{margin-bottom:1.25em}abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}abbr{text-transform:none}blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}blockquote cite:before{content:"\2014 \0020"}blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}h1{font-size:2.75em}h2{font-size:2.3125em}h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}table thead,table tfoot{background:#f7f8f7;font-weight:bold}table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}.clearfix:after,.float-group:after{clear:both}*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}.keyseq{color:rgba(51,51,51,.8)}kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}.keyseq kbd:first-child{margin-left:0}.keyseq kbd:last-child{margin-right:0}.menuseq,.menu{color:rgba(0,0,0,.8)}b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}b.button:before{content:"[";padding:0 3px 0 2px}b.button:after{content:"]";padding:0 2px 0 3px}p a>code:hover{color:rgba(0,0,0,.9)}#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}#header:after,#content:after,#footnotes:after,#footer:after{clear:both}#content{margin-top:1.25em}#content:before{content:none}#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}#header .details span:first-child{margin-left:-.125em}#header .details span.email a{color:rgba(0,0,0,.85)}#header .details br{display:none}#header .details br+span:before{content:"\00a0\2013\00a0"}#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}#header .details br+span#revremark:before{content:"\00a0|\00a0"}#header #revnumber{text-transform:capitalize}#header #revnumber:after{content:"\00a0"}#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}#toc>ul{margin-left:.125em}#toc ul.sectlevel0>li>a{font-style:italic}#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}#toc a{text-decoration:none}#toc a:active{text-decoration:underline}#toctitle{color:#7a2518;font-size:1.2em}@media only screen and (min-width:768px){#toctitle{font-size:1.375em}body.toc2{padding-left:15em;padding-right:0}#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}#toc.toc2>ul{font-size:.9em;margin-bottom:0}#toc.toc2 ul ul{margin-left:0;padding-left:1em}#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}body.toc2.toc-right{padding-left:0;padding-right:15em}body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}#toc.toc2{width:20em}#toc.toc2 #toctitle{font-size:1.375em}#toc.toc2>ul{font-size:.95em}#toc.toc2 ul ul{padding-left:1.25em}body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}#content #toc>:first-child{margin-top:0}#content #toc>:last-child{margin-bottom:0}#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}#footer-text{color:rgba(255,255,255,.8);line-height:1.44}.sect1{padding-bottom:.625em}@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}.admonitionblock>table td.icon{text-align:center;width:80px}.admonitionblock>table td.icon img{max-width:none}.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}.exampleblock>.content>:first-child{margin-top:0}.exampleblock>.content>:last-child{margin-bottom:0}.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}.listingblock pre.highlightjs{padding:0}.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}.listingblock pre.prettyprint{border-width:0}.listingblock>.content{position:relative}.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}.listingblock:hover code[data-lang]:before{display:block}.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}table.pyhltable td.code{padding-left:.75em;padding-right:0}pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}pre.pygments .lineno{display:inline-block;margin-right:.25em}table.pyhltable .linenodiv{background:none!important;padding-right:0!important}.quoteblock{margin:0 1em 1.25em 1.5em;display:table}.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}.quoteblock blockquote{margin:0;padding:0;border:0}.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}.quoteblock .quoteblock blockquote:before{display:none}.verseblock{margin:0 1em 1.25em 1em}.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}.verseblock pre strong{font-weight:400}.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}.quoteblock .attribution br,.verseblock .attribution br{display:none}.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}.quoteblock.abstract{margin:0 0 1.25em 0;display:block}.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}table.tableblock{max-width:100%;border-collapse:separate}table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}table.spread{width:100%}table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}table.frame-all{border-width:1px}table.frame-sides{border-width:0 1px}table.frame-topbot{border-width:1px 0}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}table thead th,table tfoot th{font-weight:bold}tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}p.tableblock>code:only-child{background:none;padding:0}p.tableblock{font-size:1em}td>div.verse{white-space:pre}ol{margin-left:1.75em}ul li ol{margin-left:1.5em}dl dd{margin-left:1.125em}dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}ul.checklist li>p:first-child>.fa-check-square-o:first-child,ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}ul.checklist li>p:first-child>input[type="checkbox"]:first-child{position:relative;top:1px}ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}ul.inline>li>*{display:block}.unstyled dl dt{font-weight:400;font-style:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.hdlist>table,.colist>table{border:0;background:none}.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}td.hdlist1{padding-right:.75em;font-weight:bold}td.hdlist1,td.hdlist2{vertical-align:top}.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}.colist>table tr>td:last-of-type{padding:.25em 0}.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}.imageblock>.title{margin-bottom:0}.imageblock.thumb,.imageblock.th{border-width:6px}.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}.image.left{margin-right:.625em}.image.right{margin-left:.625em}a.image{text-decoration:none}span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}span.footnote a,span.footnoteref a{text-decoration:none}span.footnote a:active,span.footnoteref a:active{text-decoration:underline}#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}#footnotes .footnote:last-of-type{margin-bottom:0}#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}.gist .file-data>table td.line-data{width:99%}div.unbreakable{page-break-inside:avoid}.big{font-size:larger}.small{font-size:smaller}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background-color:#00fafa}.black{color:#000}.black-background{background-color:#000}.blue{color:#0000bf}.blue-background{background-color:#0000fa}.fuchsia{color:#bf00bf}.fuchsia-background{background-color:#fa00fa}.gray{color:#606060}.gray-background{background-color:#7d7d7d}.green{color:#006000}.green-background{background-color:#007d00}.lime{color:#00bf00}.lime-background{background-color:#00fa00}.maroon{color:#600000}.maroon-background{background-color:#7d0000}.navy{color:#000060}.navy-background{background-color:#00007d}.olive{color:#606000}.olive-background{background-color:#7d7d00}.purple{color:#600060}.purple-background{background-color:#7d007d}.red{color:#bf0000}.red-background{background-color:#fa0000}.silver{color:#909090}.silver-background{background-color:#bcbcbc}.teal{color:#006060}.teal-background{background-color:#007d7d}.white{color:#bfbfbf}.white-background{background-color:#fafafa}.yellow{color:#bfbf00}.yellow-background{background-color:#fafa00}span.icon>.fa{cursor:default}.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}.conum[data-value] *{color:#fff!important}.conum[data-value]+b{display:none}.conum[data-value]:after{content:attr(data-value)}pre .conum[data-value]{position:relative;top:-.125em}b.conum *{color:inherit!important}.conum:not([data-value]):empty{display:none}h1,h2{letter-spacing:-.01em}dt,th.tableblock,td.content{text-rendering:optimizeLegibility}p,td.content{letter-spacing:-.01em}p strong,td.content strong{letter-spacing:-.005em}p,blockquote,dt,td.content{font-size:1.0625rem}p{margin-bottom:1.25rem}.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}.print-only{display:none!important}@media print{@page{margin:1.25cm .75cm}*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}a{color:inherit!important;text-decoration:underline!important}a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after,a[href^="mailto:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}abbr[title]:after{content:" (" attr(title) ")"}pre,blockquote,tr,img{page-break-inside:avoid}thead{display:table-header-group}img{max-width:100%!important}p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}#toc,.sidebarblock,.exampleblock>.content{background:none!important}#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}.sect1{padding-bottom:0!important}.sect1+.sect1{border:0!important}#header>h1:first-child{margin-top:1.25rem}body.book #header{text-align:center}body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}body.book #header .details{border:0!important;display:block;padding:0!important}body.book #header .details span:first-child{margin-left:0!important}body.book #header .details br{display:block}body.book #header .details br+span:before{content:none!important}body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}.listingblock code[data-lang]:before{display:block}#footer{background:none!important;padding:0 .9375em}#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}.hide-on-print{display:none!important}.print-only{display:block!important}.hide-for-print{display:none!important}.show-for-print{display:inherit!important}}</style>
<style>.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}.CodeRay .line-numbers strong{font-weight:normal}table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}table.CodeRay td{vertical-align:top}table.CodeRay td.line-numbers{text-align:right}table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}table.CodeRay td.code{padding:0 0 0 .5em}table.CodeRay td.code>pre{padding:0}.CodeRay .debug{color:#fff!important;background:#000080!important}.CodeRay .annotation{color:#007}.CodeRay .attribute-name{color:#000080}.CodeRay .attribute-value{color:#700}.CodeRay .binary{color:#509}.CodeRay .comment{color:#998;font-style:italic}.CodeRay .char{color:#04d}.CodeRay .char .content{color:#04d}.CodeRay .char .delimiter{color:#039}.CodeRay .class{color:#458;font-weight:bold}.CodeRay .complex{color:#a08}.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}.CodeRay .color{color:#099}.CodeRay .class-variable{color:#369}.CodeRay .decorator{color:#b0b}.CodeRay .definition{color:#099}.CodeRay .delimiter{color:#000}.CodeRay .doc{color:#970}.CodeRay .doctype{color:#34b}.CodeRay .doc-string{color:#d42}.CodeRay .escape{color:#666}.CodeRay .entity{color:#800}.CodeRay .error{color:#808}.CodeRay .exception{color:inherit}.CodeRay .filename{color:#099}.CodeRay .function{color:#900;font-weight:bold}.CodeRay .global-variable{color:#008080}.CodeRay .hex{color:#058}.CodeRay .integer,.CodeRay .float{color:#099}.CodeRay .include{color:#555}.CodeRay .inline{color:#00}.CodeRay .inline .inline{background:#ccc}.CodeRay .inline .inline .inline{background:#bbb}.CodeRay .inline .inline-delimiter{color:#d14}.CodeRay .inline-delimiter{color:#d14}.CodeRay .important{color:#555;font-weight:bold}.CodeRay .interpreted{color:#b2b}.CodeRay .instance-variable{color:#008080}.CodeRay .label{color:#970}.CodeRay .local-variable{color:#963}.CodeRay .octal{color:#40e}.CodeRay .predefined{color:#369}.CodeRay .preprocessor{color:#579}.CodeRay .pseudo-class{color:#555}.CodeRay .directive{font-weight:bold}.CodeRay .type{font-weight:bold}.CodeRay .predefined-type{color:inherit}.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}.CodeRay .key{color:#808}.CodeRay .key .delimiter{color:#606}.CodeRay .key .char{color:#80f}.CodeRay .value{color:#088}.CodeRay .regexp .delimiter{color:#808}.CodeRay .regexp .content{color:#808}.CodeRay .regexp .modifier{color:#808}.CodeRay .regexp .char{color:#d14}.CodeRay .regexp .function{color:#404;font-weight:bold}.CodeRay .string{color:#d20}.CodeRay .string .string .string{background:#ffd0d0}.CodeRay .string .content{color:#d14}.CodeRay .string .char{color:#d14}.CodeRay .string .delimiter{color:#d14}.CodeRay .shell{color:#d14}.CodeRay .shell .delimiter{color:#d14}.CodeRay .symbol{color:#990073}.CodeRay .symbol .content{color:#a60}.CodeRay .symbol .delimiter{color:#630}.CodeRay .tag{color:#008080}.CodeRay .tag-special{color:#d70}.CodeRay .variable{color:#036}.CodeRay .insert{background:#afa}.CodeRay .delete{background:#faa}.CodeRay .change{color:#aaf;background:#007}.CodeRay .head{color:#f8f;background:#505}.CodeRay .insert .insert{color:#080}.CodeRay .delete .delete{color:#800}.CodeRay .change .change{color:#66f}.CodeRay .head .head{color:#f4f}</style>
<link type="text/css" rel="stylesheet" href="static/css/springcloud.min.css"><script type="text/javascript" src="static/js/springcloud.min.js"></script></head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Spring Cloud Connectors</h1>
<div id="toc" class="toc2">
<div id="toctitle"><font o="2">目录</font></div>
<ul class="sectlevel1">
<li><a href="#spring-cloud-connectors-install"><font o="3">介绍</font></a>
<ul class="sectlevel2">
<li><a href="#_concepts"><font o="4">概念</font></a></li>
<li><a href="#_submodules"><font o="5">子模块</font></a></li>
</ul>
</li>
<li><a href="#_getting_started"><font o="6">入门</font></a>
<ul class="sectlevel2">
<li><a href="#_including_cloud_connectors"><font o="7" class="">包含云连接器</font></a></li>
<li><a href="#_spring_applications"><font o="8">Spring应用程序</font></a></li>
<li><a href="#_non_spring_applications"><font o="9">非Spring应用程序</font></a></li>
</ul>
</li>
<li><a href="#_spring_cloud_connectors_core"><font o="10">Spring Cloud Connectors核心</font></a>
<ul class="sectlevel2">
<li><a href="#_connecting_to_a_cloud"><font o="11">连接云端</font></a></li>
</ul>
</li>
<li><a href="#_spring_service_connector"><font o="12">Spring服务连接器</font></a></li>
<li><a href="#_cloud_foundry_connector"><font o="13">Cloud Foundry连接器</font></a></li>
<li><a href="#_heroku_connector"><font o="14">Heroku连接器</font></a></li>
<li><a href="#_local_configuration_connector"><font o="15">本地配置连接器</font></a>
<ul class="sectlevel2">
<li><a href="#_quick_start"><font o="16">快速开始</font></a></li>
<li><a href="#_property_sources"><font o="17" class="">属性来源</font></a>
<ul class="sectlevel3">
<li><a href="#_providing_a_bootstrap_properties_file"><font o="18" class="">提供引导属性文件</font></a></li>
<li><a href="#_property_precedence"><font o="19" class="">属性优先级</font></a></li>
</ul>
</li>
<li><a href="#_activating_the_connector"><font o="20">激活连接器</font></a></li>
<li><a href="#_service_definitions"><font o="21">服务定义</font></a></li>
<li><a href="#_instance_id"><font o="22">实例ID</font></a></li>
</ul>
</li>
<li><a href="#_extending_spring_cloud_connectors"><font o="23">扩展Spring Cloud Connectors</font></a>
<ul class="sectlevel2">
<li><a href="#_extensibility_overview"><font o="24">可扩展性概述</font></a></li>
<li><a href="#_adding_cloud_platform_support"><font o="25">添加云平台支持</font></a></li>
<li><a href="#_adding_service_support"><font o="26">添加服务支持</font></a></li>
<li><a href="#_adding_framework_support"><font o="27">添加框架支持</font></a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="spring-cloud-connectors-install"><font o="28">介绍</font></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font o="29">Spring Cloud Connectors为在云平台上运行的基于JVM的应用程序提供了一个简单的抽象，可以在运行时发现绑定的服务和部署信息，并且支持将发现的服务注册为Spring bean。</font><font o="30">它基于插件模型，以便相同的编译应用程序可以在本地或任何多个云平台上进行部署，并通过Java服务提供程序接口（SPI）支持定制服务定义。</font></p>
</div>
<div class="paragraph">
<p><font o="31">“连接器”项目提供即时支持，用于发现Heroku和Cloud Foundry云上的常见服务。</font><font o="32">它还包括一个基于属性的连接器，可以为开发和测试提供配置。</font></p>
</div>
<div class="sect2">
<h3 id="_concepts"><font o="33">概念</font></h3>
<div class="paragraph">
<p><font o="34">核心连接器概念如下所述。</font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font o="35">云连接器</font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font o="36">一个特定于平台的界面，用于标识平台的存在并发现绑定到应用程序部署的任何服务。</font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font o="37">服务连接器</font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font o="38">表示与服务的运行时连接的对象（例如，<code i="5">javax.sql.DataSource</code>）。</font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font o="39">服务信息</font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font o="40">有关底层服务的信息（如主机，端口和凭据）。</font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font o="41">应用程序信息</font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font o="42">有关应用程序和特定运行实例的信息。</font></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_submodules"><font o="43">子模块</font></h3>
<div class="paragraph">
<p><font o="44">该项目包含三个主要子模块。</font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font o="45">Spring Cloud Connectors核心</font></strong><font o="45">：核心图书馆与云不相关和Spring无关。</font><font o="46">它为喜欢手动访问云服务和应用程序信息的开发人员提供了编程入口点。</font><font o="47">它还为几个常用服务（数据库，消息队列）和基于SPI的扩展机制提供基本服务定义，用于贡献云和服务连接器。</font></p>
</li>
<li>
<p><strong><font o="48">Spring Cloud Spring服务连接器</font></strong><font o="48">：将应用程序信息，云信息和发现的服务公开为Spring适合类型的bean的Spring库（例如，SQL服务将作为<code i="6">javax.sql.DataSource</code>可选连接池）。</font></p>
</li>
<li>
<p><font o="49">云连接器：</font></p>
<div class="ulist">
<ul>
<li>
<p><strong><font o="50">Spring Cloud Cloud Foundry连接器</font></strong><font o="50">：</font><a href="javascript:;"><font o="50">Cloud Foundry的连接器</font></a><font o="50">。</font></p>
</li>
<li>
<p><strong><font o="51">Spring Cloud Heroku连接器</font></strong><font o="51">：</font><a href="javascript:;"><font o="51">Heroku的连接器</font></a><font o="51">。</font></p>
</li>
<li>
<p><strong><font o="52">Spring Cloud本地配置连接器</font></strong><font o="52">：基于属性的连接器，用于在开发或测试期间手动提供配置信息。</font><font o="53">允许在应用程序部署的所有阶段使用相同的Spring Cloud Connectors配置接线。</font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><font o="54">入门</font></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font o="55">有关如何使用构建系统包含适当依赖关系的示例，请参见下文。</font></p>
</div>
<div class="sect2">
<h3 id="_including_cloud_connectors"><font o="56">包括云连接器</font></h3>
<div class="paragraph">
<p><font o="57">包括您想要发现的每个云平台的连接器。</font><font o="58">包括多个连接器是完美的; </font><font o="59">每个连接器将确定它是否应在特定环境中处于活动状态。</font></p>
</div>
<div class="paragraph">
<p><font o="60">在Maven中，使用所需的工件版本替换<code i="7">${VERSION}</code>：</font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- To use Spring Cloud Connectors for development --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.springframework.cloud<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-cloud-localconfig-connector<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>${VERSION}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span><font></font>
<font></font>
<span class="comment">&lt;!-- If you intend to deploy the app to Cloud Foundry --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.springframework.cloud<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-cloud-cloudfoundry-connector<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>${VERSION}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span><font></font>
<font></font>
<span class="comment">&lt;!-- If you intend to deploy the app to Heroku --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>org.springframework.cloud<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>spring-cloud-heroku-connector<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>${VERSION}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font o="61">在Gradle中，用所需的版本替换<code i="8">${VERSION}</code>：</font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {<font></font>
<font></font>
    <span class="comment">// To use Spring Cloud Connectors for development</span>
    compile <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.cloud:spring-cloud-localconfig-connector:${VERSION}</span><span class="delimiter">'</span></span><font></font>
<font></font>
    <span class="comment">// If you intend to deploy the app to Cloud Foundry</span>
    compile <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.cloud:spring-cloud-cloudfoundry-connector:${VERSION}</span><span class="delimiter">'</span></span><font></font>
<font></font>
    <span class="comment">// If you intend to deploy the app to Heroku</span>
    compile <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.cloud:spring-cloud-heroku-connector:${VERSION}</span><span class="delimiter">'</span></span><font></font>
<font></font>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_applications"><font o="62">Spring应用程序</font></h3>
<div class="paragraph">
<p><font o="63">如果您正在撰写Spring应用程序，则</font><font o="63">除了包含云连接器依赖项之外</font><font o="63">，还包括</font><a href="#_spring_service_connector"><font o="63">Spring服务连接</font></a><font o="63">器依赖项。</font></p>
</div>
<div class="paragraph">
<p><font o="64">在Maven：</font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>org.springframework.cloud<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>spring-cloud-spring-service-connector<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>${VERSION}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font o="65">在毕业：</font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {<font></font>
<font></font>
    compile <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.cloud:spring-cloud-spring-service-connector:${VERSION}</span><span class="delimiter">'</span></span><font></font>
<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font o="66">然后</font><a href="javascript:;"><font o="66">使用Java配置</font></a><font o="66">或</font><a href="javascript:;"><font o="66"><code i="9">&lt;cloud&gt;</code>命名</font></a><font o="66">空间，按照</font><a href="#_spring_service_connector"><font o="66">Spring</font></a><font o="66">配置中的</font><a href="#_spring_service_connector"><font o="66">Spring服务连接器</font></a><font o="66">文档中的说明</font><a href="javascript:;"><font o="66">进行</font></a><font></font><a href="javascript:;"><font o="66">操作</font></a><font o="66">。</font></p>
</div>
</div>
<div class="sect2">
<h3 id="_non_spring_applications"><font o="67">非Spring应用程序</font></h3>
<div class="paragraph">
<p><font o="68">每个云连接器都包含<code i="10">spring-cloud-core</code>依赖关系，因此只需要包含所需平台的连接器即可。</font><font o="69">然后按照</font><a href="#_spring_cloud_connectors_core"><font o="69">使用Spring Cloud Connectors API的说明进行操作</font></a><font o="69">。</font></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_cloud_connectors_core"><font o="70">Spring Cloud Connectors核心</font></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font o="71">该核心库提供对应用程序和服务信息的编程访问。</font><font o="72">该库没有Spring依赖关系，可以在非Spring应用程序中使用。</font></p>
</div>
<div class="paragraph">
<p><strong><font o="73">该库需要Java 6或更新版本。</font></strong><font o="74">这是云不可知的; </font><font o="75">使用Java SPI，它支持可插拔云和服务连接器。</font><font o="76">除了本地提供的开发和测试配置之外，支持Cloud Foundry和Heroku可以开箱即用。</font></p>
</div>
<div class="sect2">
<h3 id="_connecting_to_a_cloud"><font o="77">连接云端</font></h3>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font o="78">注意</font></div>
</td>
<td class="content">
<div class="paragraph">
<p><font o="79">如果您在Spring应用程序中使用Spring Cloud Connectors，则应考虑</font><a href="#_spring_service_connector"><font o="79">自动注入Spring bean</font></a><font o="79">。</font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="ulist">
<ul>
<li>
<p><font o="80">在运行时类路径中包含所需的云连接器，</font><a href="#_getting_started"><font o="80">如主要文档中所述</font></a><font o="80">。</font></p>
</li>
<li>
<p><font o="81">创建一个<code i="11">CloudFactory</code>实例。</font><font o="82">创建<code i="12">CloudFactory</code>实例有点贵，所以我们建议使用单例实例。</font><font o="83">如果您使用依赖注入框架（例如Spring），则为<code i="13">CloudFactory</code>创建一个bean。</font></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CloudFactory cloudFactory = <span class="keyword">new</span> CloudFactory();</code></pre>
</div>
</div>
</li>
<li>
<p><font o="84">获取运行应用程序的环境的<code i="14">Cloud</code>对象。</font></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Cloud cloud = cloudFactory.getCloud();</code></pre>
</div>
</div>
<div class="paragraph">
<p><font o="85">请注意，您的类路径上必须有适合您的部署环境的<code i="15">CloudConnector</code>。</font><font o="86">例如，如果要将应用程序部署到Cloud Foundry，则必须将</font><a href="#_cloud_foundry_connector"><font o="86">Cloud Foundry连接器添加</font></a><font o="86">到类路径中。</font><font o="87">如果没有找到合适的<code i="16">CloudConnector</code>，<code i="17">getCloud()</code>方法将会抛出一个<code i="18">CloudException</code>。</font></p>
</div>
</li>
<li>
<p><font o="88">使用<code i="19">Cloud</code>实例访问应用程序和服务信息并创建服务连接器。</font></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// ServiceInfo has all the information necessary to connect to the underlying service</span>
<span class="predefined-type">List</span>&lt;ServiceInfo&gt; serviceInfos = cloud.getServiceInfos();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Find the `ServiceInfo` definitions suitable for connecting to a particular service type</span>
<span class="predefined-type">List</span>&lt;ServiceInfo&gt; databaseInfos = cloud.getServiceInfos(<span class="predefined-type">DataSource</span>.class);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Alternatively, let Spring Cloud Connectors create a service connector for you</span>
<span class="predefined-type">String</span> serviceId = <span class="string"><span class="delimiter">"</span><span class="content">inventory-db</span><span class="delimiter">"</span></span>;
<span class="predefined-type">DataSource</span> ds = cloud.getServiceConnector(serviceId, <span class="predefined-type">DataSource</span>.class,
                                            <span class="predefined-constant">null</span> <span class="comment">/* default config */</span>);</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_service_connector"><font o="89">Spring服务连接器</font></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font o="90">Spring服务连接器为Spring应用程序创建服务连接对象。</font><font o="91">它允许连接bean的Java或XML配置，目前通过<code i="20">javax.sql.DataSource</code>，SMTP通过<code i="21">org.springframework.mail.MailSender</code>，RabbitMQ通过Spring AMQP，以及MongoDB和Redis通过Spring支持MySQL和PostgreSQL等关系数据库。数据项目。</font><font o="92">它还支持连接到通用（例如，私有）服务。</font></p>
</div>
<div class="paragraph">
<p><font o="93">有关此服务连接器的详细信息，请参阅</font><a href="javascript:;"><font o="93">Spring Cloud Spring服务连接器</font></a><font o="93">。</font></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cloud_foundry_connector"><font o="94">Cloud Foundry连接器</font></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font o="95">Cloud Foundry连接器发现绑定到在Cloud Foundry环境中运行的应用程序的服务。</font><font o="96">由于它以Cloud Foundry的标准格式消费了绑定的服务信息，它是提供者不可知的; </font><font o="97">它目前知道应用程序监视，DB2，MongoDB，MySQL，Oracle，PostgreSQL，RabbitMQ，Redis，SMTP和SQL Server服务。</font></p>
</div>
<div class="paragraph">
<p><font o="98">有关此云连接器的详细信息，请参阅</font><a href="javascript:;"><font o="98">Spring Cloud Cloud Foundry连接器</font></a><font o="98">。</font></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_heroku_connector"><font o="99">Heroku连接器</font></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font o="100">Heroku连接器发现绑定到运行在Heroku中的应用程序的服务。</font><font o="101">它目前知道PostgreSQL（由{4}提供），MySQL（由ClearDB提供），Redis（由Redis To Go提供，Redis Cloud，RedisGreen，openredis和Heroku），MongoDB（由mLab提供） MongoHQ和MongoSoup）和RabbitMQ（由CloudAMQP提供）。</font><font o="102">它可以扩展到支持这些服务的其他提供商。</font></p>
</div>
<div class="paragraph">
<p><font o="103">有关此云连接器的详细信息，请参阅</font><a href="javascript:;"><font o="103">Spring Cloud Heroku连接器</font></a><font o="103">。</font></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_local_configuration_connector"><font o="104">本地配置连接器</font></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font o="105">此连接器可以在本地配置Spring Cloud Connectors服务以进行开发或测试。</font><strong><font o="106">当前的实现只从Java属性读取。</font></strong></p>
</div>
<div class="sect2">
<h3 id="_quick_start"><font o="107">快速开始</font></h3>
<div class="paragraph">
<p><font o="108">由于服务URI包含密码，不应存储在代码中，此连接器不会尝试从类路径中读取服务定义。</font><font o="109">您可以提供服务定义作为系统属性。</font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="term">java -Dspring.cloud.database='mysql://user:<a href="email-protection.html" class="__cf_email__" data-cfemail="1c6c7d6f6f5c74736f68">[email&#160;protected]</a>:1234/dbname' -jar my-app.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p><font o="110">您还可以通过设置<code i="22">spring.cloud.propertiesFile</code>系统属性从配置属性文件提供服务定义：</font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="term">java -Dspring.cloud.propertiesFile=/path/to/spring-cloud.properties -jar my-app.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p><font o="111">或者通过在运行时类路径上提供引导属性文件<code i="23">spring-cloud-bootstrap.properties</code>。</font><font o="112">该文件将仅对名为<code i="24">spring.cloud.propertiesFile</code>的属性进行检查，其值将从系统属性内插。</font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">spring.cloud.propertiesFile: ${user.home}/.config/myApp/spring-cloud.properties</code></pre>
</div>
</div>
<div class="paragraph">
<p><font o="113">系统属性或配置属性文件应包含以下格式的应用程序ID和所需的服务。</font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">spring.cloud.appId:    myApp<font></font>
; spring.cloud.{id}:   URI<font></font>
spring.cloud.database: mysql://user:<a href="email-protection.html" class="__cf_email__" data-cfemail="4e3e2f3d3d0e26213d3a">[email&#160;protected]</a>:1234/dbname</code></pre>
</div>
</div>
<div class="paragraph">
<p><font o="114">服务类型由URI方案决定。</font><font o="115">如果找到名为<code i="25">spring.cloud.appId</code>的属性（在系统属性或配置属性文件中），连接器将激活。</font></p>
</div>
</div>
<div class="sect2">
<h3 id="_property_sources"><font o="116">物业来源</font></h3>
<div class="paragraph">
<p><font o="117">此连接器首先尝试具体读取系统属性和名为<code i="26">spring.cloud.propertiesFile</code>的系统属性。</font><font o="118">如果系统属性不可读（如果安全管理器拒绝<code i="27">checkPropertiesAccess</code>），则它们将被视为空。</font><font o="119">如果找到名为<code i="28">spring.cloud.propertiesFile</code>的系统属性，则该文件将作为属性列表加载。</font></p>
</div>
<div class="sect3">
<h4 id="_providing_a_bootstrap_properties_file"><font o="120">提供引导属性文件</font></h4>
<div class="paragraph">
<p><font o="121">为了避免使用配置属性文件的路径手动配置运行配置或测试跑步者，连接器可以读取运行时类路径中的模板文件名。</font><font o="122">该文件必须命名为<code i="29">spring-cloud-bootstrap.properties</code>并位于classpath根目录下。</font><font o="123">为了安全起见，连接器不会尝试从文件中读取任何服务URI。</font><font o="124">如果连接器找到该文件，它将读取属性<code i="30">spring.cloud.propertiesFile</code>，并</font><font o="124">使用系统属性中相应的值</font><a href="javascript:;"><font o="124">替换模式<code i="31">${system.property}</code></font></a><font o="124">。</font><font o="125">最有用的选项通常是<code i="32">${user.home}</code>。</font></p>
</div>
<div class="paragraph">
<p><font o="126">系统属性中指定的配置属性文件将覆盖类路径中可用的任何引导文件。</font></p>
</div>
</div>
<div class="sect3">
<h4 id="_property_precedence"><font o="127">属性优先级</font></h4>
<div class="paragraph">
<p><font o="128">为了提供最大的配置灵活性，连接器将覆盖在运行时定义的系统属性的<code i="33">spring.cloud.propertiesFile</code>文件中指定的任何属性（应用程序ID和服务定义）。</font><font o="129">如果覆盖服务ID，连接器将在<code i="34">WARN</code>上记录消息。</font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_activating_the_connector"><font o="130">激活连接器</font></h3>
<div class="paragraph">
<p><font o="131">Spring Cloud Connectors Core预计只有一个云连接器可以匹配运行时环境。</font><font o="132">此连接器通过属性的存在，在配置属性文件或名为<code i="35">spring.cloud.appId</code>的系统属性中标识“本地云”。</font><font o="133">此属性将在<code i="36">ApplicationInstanceInfo</code>中使用。</font></p>
</div>
</div>
<div class="sect2">
<h3 id="_service_definitions"><font o="134">服务定义</font></h3>
<div class="paragraph">
<p><font o="135">如果连接器被激活，它将遍历与模式<code i="37">spring.cloud.{serviceId}</code>匹配的键的所有可用属性。</font><font o="136">每个值被解释为服务的URI，并且从该方案确定服务的类型。</font><font o="137">支持每个标准<code i="38">UriBasedServiceInfo</code>。</font></p>
</div>
</div>
<div class="sect2">
<h3 id="_instance_id"><font o="138">实例ID</font></h3>
<div class="paragraph">
<p><font o="139">此连接器创建一个用作实例ID的UUID，因为Java不提供用于可靠地确定主机名或PID的任何便携式机制。</font></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extending_spring_cloud_connectors"><font o="140">扩展Spring Cloud Connectors</font></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font o="141">除了内置的服务和云支持外，还包括Spring服务连接器，Spring Cloud Connectors可以扩展到支持额外的云平台，云服务或应用程序框架。</font><font o="142">详见下文。</font></p>
</div>
<div class="sect2">
<h3 id="_extensibility_overview"><font o="143">可扩展性概述</font></h3>
<div class="paragraph">
<p><font o="144" class="">如“ </font><a href="#_including_cloud_connectors"><font o="144" class="">包含云连接器”</font></a><font o="144" class="">部分</font><font o="144" class="">所述</font><font o="144" class="">，您的应用程序可以包括多个云平台的云连接器。</font><font o="145">Spring Cloud Connectors Core激活运行应用程序的平台的<code i="39">CloudConnector</code>。</font><font o="146">该云连接器的<code i="40">ServiceInfoCreator</code>类针对应用程序的服务创建<code i="41">ServiceInfo</code>对象，<code i="42">ServiceConnectorCreator</code>类使用<code i="43">ServiceInfo</code>对象创建服务连接对象，以在应用程序中使用。</font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="static/picture/spring-cloud-connectors-design.png" alt="弹簧云连接器设计" width="650" height="341">
</div>
</div>
<div class="paragraph">
<p><font o="147">您可以通过以下三种方式扩展Spring Cloud Connectors：</font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong><font o="148">云平台支持。</font></strong><font o="149">开箱即用Spring Cloud Connectors支持Cloud Foundry和Heroku平台。</font><font o="150">您可以扩展Spring Cloud Connectors来为其他云平台和提供商提供支持。</font></p>
<div class="paragraph">
<p><font o="151">Spring Cloud Connectors使用该</font><a href="javascript:;"><code>CloudConnector</code></a><font o="151">界面提供云平台支持。</font><font o="152" class="">特定云平台的<code i="44">CloudConnector</code>实施负责检测应用程序在该云平台上运行的时间，从云平台获取有关应用程序的信息，以及获取有关应用程序绑定的服务的信息。</font></p>
</div>
</li>
<li>
<p><strong><font o="153">云服务支持。</font></strong><font o="154">您可以扩展Spring Cloud Connectors以支持其他服务，包括特定于您自己的环境或应用程序的服务。</font></p>
<div class="paragraph">
<p><font o="155">Spring Cloud Connectors使用两个接口来提供云服务支持：</font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font o="156">A </font><a href="javascript:;"><code>ServiceInfo</code></a><font o="156">建立连接到服务所需的信息。</font><font o="157">在数据库服务的情况下，<code i="45">ServiceInfo</code>实现可能包括主机，端口，数据库名称，用户名和密码的字段; </font><font o="158">在Web服务的情况下，它可能包含URL和API密钥的字段。</font></p>
</li>
<li>
<p><font o="159">A </font><a href="javascript:;"><code>ServiceInfoCreator</code></a><font o="159">根据云连接器收集的服务信息创建<code i="46">ServiceInfo</code>对象。</font><font o="160">一个<code i="47">ServiceInfoCreator</code>实现是专门针对云平台的。</font></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><font o="161">应用框架支持。</font></strong><font o="162">的</font><a href="javascript:;"><font o="162">Spring Cloud Spring服务连接器</font></a><font o="162">将创建服务连接器</font><a href="javascript:;"><font o="162">Spring数据</font></a><font o="162">的数据类型。</font><font o="163">您可以使用另一个框架来扩展Spring Cloud Connectors来提供服务连接对象。</font></p>
<div class="paragraph">
<p><font o="164">Spring Cloud Connectors使用</font><a href="javascript:;"><code>ServiceConnectorCreator</code></a><font o="164">接口提供框架支持。</font><font o="165">A <code i="48">ServiceConnectorCreator</code>使用<code i="49">ServiceInfo</code>对象提供的服务连接信息创建服务连接器。</font></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_adding_cloud_platform_support"><font o="166">添加云平台支持</font></h3>
<div class="paragraph">
<p><font o="167">要允许Spring Cloud Connectors检测新的云平台，请为平台添加云连接器。</font></p>
</div>
<div class="paragraph">
<p><font o="168">云连接器确定应用程序是否在特定云中运行，标识应用程序信息（例如特定运行实例的名称和实例ID），并将绑定的服务（例如环境变量中暴露的URI）映射为<code i="50">ServiceInfo</code>对象。</font></p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font o="169">提示</font></div>
</td>
<td class="content">
<div class="paragraph">
<p><font o="170">有关</font><a href="javascript:;"><font o="170">示例</font></a><font o="170">，</font><font o="170">请参阅</font><a href="javascript:;"><font o="170">Cloud Foundry连接器</font></a><font o="170">和</font><a href="javascript:;"><font o="170">Heroku连接</font></a><font o="170">器。</font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font o="171">Spring Cloud Connectors使用</font><a href="javascript:;"><font o="171">Java SPI</font></a><font o="171">来发现可用的连接器。</font></p>
</div>
<div class="paragraph">
<p><font o="172">您的连接器类必须实现</font><a href="javascript:;"><code>CloudConnector</code></a><font o="172">接口，其中包括三种方法：</font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font o="173"><code i="51">boolean isInMatchingCloud()</code>：确定连接器是否在其提供支持的云中运行。</font></p>
<div class="paragraph">
<p><font o="174">Spring Cloud Connectors包含在应用程序中的每个云连接器上的核心呼叫<code i="52">isInMatchingCloud()</code>，并激活响应<code i="53">true</code>的第一个连接器。</font></p>
</div>
</li>
<li>
<p><font o="175"><code i="54">ApplicationInstanceInfo getApplicationInstanceInfo()</code>：返回有关正在运行的应用程序实例的信息。</font></p>
<div class="paragraph">
<p><font o="176">一个<code i="55">ApplicationInstanceInfo</code>必须提供实例ID（<code i="56">String</code>）和应用程序标识（<code i="57">String</code>）。</font><font o="177">可以根据需要将其他属性添加到<code i="58">Map</code>，并通过<code i="59">getProperties()</code>返回。</font></p>
</div>
</li>
<li>
<p><font o="178"><code i="60">List&lt;ServiceInfo&gt; getServiceInfos()</code>：为应用程序绑定的每个服务返回一个<code i="61">ServiceInfo</code>对象。</font></p>
<div class="paragraph">
<p><font o="179">如果没有任何服务被绑定到应用程序，<code i="62">getServiceInfos()</code>可以返回一个空的<code i="63">List</code>。</font></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font o="180">新的云连接器应在提供者配置文件<code i="64">META-INF/services/org.springframework.cloud.CloudConnector</code>中列出完全限定的类名。</font></p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_service_support"><font o="181">添加服务支持</font></h3>
<div class="paragraph">
<p><font o="182">要允许Spring Cloud Connectors发现新的服务类型，请创建一个</font><a href="javascript:;"><code>ServiceInfo</code></a><font o="182">包含连接到服务所需信息的类。</font><font o="183">如果您可以通过URI指定服务，请</font><a href="javascript:;"><code>UriBasedServiceInfo</code></a><font o="183">在调用<code i="65">super</code>构造函数</font><font o="183">时扩展</font><font o="183">并提供URI方案。</font></p>
</div>
<div class="paragraph">
<p><font o="184">以下课程会向<code i="67">helloworld://username:<a href="email-protection.html" class="__cf_email__" data-cfemail="6e1e0f1d1d19011c0a2e06011d1a">[email&#160;protected]</a>:port/Bonjour</code>提供<code i="66">HelloWorldService</code>的信息。</font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">HelloWorldServiceInfo</span> <span class="directive">extends</span> UriBasedServiceInfo {
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> URI_SCHEME = <span class="string"><span class="delimiter">"</span><span class="content">helloworld</span><span class="delimiter">"</span></span>;<font></font>
<font></font>
  <span class="comment">// Needed to support structured service definitions such as Cloud Foundry's</span>
    <span class="directive">public</span> HelloWorldServiceInfo(<span class="predefined-type">String</span> id, <span class="predefined-type">String</span> host, <span class="type">int</span> port, <span class="predefined-type">String</span> username, <span class="predefined-type">String</span> password, <span class="predefined-type">String</span> greeting) {
    <span class="local-variable">super</span>(id, URI_SCHEME, host, port, username, password, greeting);<font></font>
    }<font></font>
<font></font>
    <span class="comment">// Needed to support URI-based service definitions such as Heroku's</span>
    <span class="directive">public</span> HelloWorldServiceInfo(<span class="predefined-type">String</span> id, <span class="predefined-type">String</span> uri) {
        <span class="local-variable">super</span>(id, uri);<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font o="185">创建<code i="68">ServiceInfo</code>类后，您将需要</font><a href="javascript:;"><code>ServiceInfoCreator</code></a><font o="185">为每个要支持的云平台</font><font o="185">创建一个</font><font o="185">。</font><font o="186">如果您为Spring Cloud Connectors已经支持的云平台添加服务支持，则可能需要扩展相应的创建者基类。</font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Cloud Foundry</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font o="188">扩展<code i="69">CloudFoundryServiceInfoCreator</code>。</font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Heroku</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font o="190">延长<code i="70">HerokuServiceInfoCreator</code>。</font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font o="191">本地配置</font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font o="192">扩展<code i="71">LocalConfigServiceInfoCreator</code>。</font></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font o="193">一个<code i="72">ServiceInfoCreator</code>通常可以像实例化新的<code i="73">ServiceInfo</code>的方法一样简单。</font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> HelloWorldServiceInfo createServiceInfo(<span class="predefined-type">String</span> id, <span class="predefined-type">String</span> uri) {
  <span class="keyword">return</span> <span class="keyword">new</span> HelloWorldServiceInfo(id, uri);<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font o="194">在您的云的<code i="75">ServiceInfoCreator</code>基类的相应提供商配置文件中注册您的<code i="74">ServiceInfoCreator</code>类。</font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Cloud Foundry</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font o="196">将创建者的完全限定类名添加到<code i="76">META-INF/services/org.springframework.cloud.cloudfoundry.CloudFoundryServiceInfoCreator</code>。</font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Heroku</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font o="198">将您的创建者的完全限定类名添加到<code i="77">META-INF/services/org.springframework.cloud.heroku.HerokuServiceInfoCreator</code>。</font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font o="199">本地配置</font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font o="200">将您的创建者的完全限定类名添加到<code i="78">META-INF/services/org.springframework.cloud.localconfig.LocalConfigServiceInfoCreator</code>。</font></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_adding_framework_support"><font o="201">添加框架支持</font></h3>
<div class="paragraph">
<p><font o="202">要允许Spring Cloud Connectors为支持的云服务提供框架特定的服务对象，请为框架添加服务连接器。</font></p>
</div>
<div class="paragraph">
<p><font o="203">服务连接器为云连接器发现的服务消耗<code i="79">ServiceInfo</code>，并将其转换为适当的服务对象（例如在代表SQL数据库的服务定义的情况下为<code i="80">DataSource</code>）。</font></p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font o="204">提示</font></div>
</td>
<td class="content">
<div class="paragraph">
<p><font o="205">服务连接器可以紧密绑定到正在创建其服务对象的框架。</font><font o="206">例如，</font><a href="#_spring_service_connector"><font o="206">Spring服务连接</font></a><font o="206">器中的一些连接</font><a href="#_spring_service_connector"><font o="206">器</font></a><font o="206">创建由Spring数据定义的连接工厂，用于构建Spring数据模板。</font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font o="207">你的连接器类必须实现</font><a href="javascript:;"><code>ServiceConnectorCreator</code></a><font o="207">接口，它有三种方法：</font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font o="208"><code i="81">SC create()</code>：从给定的<code i="82">ServiceInfo</code>和配置创建服务连接对象。</font></p>
</li>
<li>
<p><font o="209"><code i="83">Class&lt;SC&gt; getServiceConnectorType()</code>：返回要创建的连接对象的类型。</font></p>
</li>
<li>
<p><font o="210"><code i="84">Class&lt;?&gt; getServiceInfoType()</code>：返回类接受的类型<code i="85">ServiceInfo</code>。</font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font o="211">在提供者配置文件<code i="86">META-INF/services/org.springframework.cloud.service.ServiceConnectorCreator</code>中列出完全限定的连接器类名。</font></p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text"><font o="212">
最后更新2016-03-01 11:13:08 CST
</font></div>
</div>

<script data-cfasync="false" src="static/js/email-decode.min.js"></script><script type="text/javascript" name="springcloud">springcloud.cc({"original":{"2":"Table of Contents","3":"Introduction","4":"Concepts","5":"Submodules","6":"Getting Started","7":"Including Cloud Connectors","8":"{3/} Applications","9":"Non-{3/} Applications","10":"{0/} Core","11":"Connecting to a Cloud","12":"{3/} Service Connector","13":"{1/} Connector","14":"{4/} Connector","15":"local-configuration Connector","16":"Quick Start","17":"Property Sources","18":"Providing a Bootstrap Properties File","19":"Property Precedence","20":"Activating the Connector","21":"Service Definitions","22":"Instance ID","23":"Extending {0/}","24":"Extensibility Overview","25":"Adding Cloud Platform Support","26":"Adding Service Support","27":"Adding Framework Support","28":"Introduction","29":"{0/} provides a simple abstraction for JVM-based applications running on cloud platforms to discover bound services and deployment information at runtime, and provides support for registering discovered services as {3/} beans.","30":"It is based on a plugin model so that the identical compiled application can be deployed locally or on any of multiple cloud platforms, and it supports custom service definitions through Java Service Provider Interfaces (SPI).","31":"The Connectors project provides out-of-the-box support for discovering common services on {4/} and {1/} clouds.","32":"It also includes a properties-based connector that can supply configuration for development and testing.","33":"Concepts","34":"The core Connectors concepts are described below.","35":"Cloud Connector","36":"A platform-specific interface that identifies the presence of the platform and discovers any services bound to the application deployment.","37":"Service Connector","38":"An object that represents a runtime connection to a service (for example, a {5/}).","39":"Service Information","40":"Information about the underlying service (such as host, port, and credentials).","41":"Application Information","42":"Information about the application and the particular running instance.","43":"Submodules","44":"The project contains three major submodules.","45":"{0/} Core : The core library, which is both cloud-agnostic and {3/}-agnostic.","46":"It provides a programmatic entry point for developers who prefer to access cloud services and application information manually.","47":"It also provides basic service definitions for several common services (databases, message queues) and an SPI-based extension mechanism for contributing cloud and service connectors.","48":"{2/} {3/} Service Connector: A {3/} library that exposes application information, cloud information, and discovered services as {3/} beans of the appropriate type (for example, an SQL service will be exposed as a {6/} with optional connection pooling).","49":"The cloud connectors:","50":"{2/} {1/} Connector: Connector for {1/}.","51":"{2/} {4/} Connector: Connector for {4/}.","52":"{2/} local-configuration Connector : Properties-based connector for manually providing configuration information during development or testing.","53":"Allows use of the same {0/} configuration wiring in all stages of application deployment.","54":"Getting Started","55":"See below for examples of how to include the appropriate dependencies using your build system.","56":"Including Cloud Connectors","57":"Include the connector for each cloud platform which you want to be discoverable.","58":"Including multiple connectors is perfectly fine;","59":"each connector will determine whether it should be active in a particular environment.","60":"In Maven, replacing {7/} with the desired artifact version:","61":"In Gradle, replacing {8/} with the desired version:","62":"{3/} Applications","63":"If you’re writing a {3/} application, include the {3/} Service Connector dependency in addition to your cloud connector dependencies.","64":"In Maven:","65":"In Gradle:","66":"Then follow the instructions in the {3/} Service Connector documentation on {3/} configuration using Java configuration or the {9/} namespace.","67":"Non-{3/} Applications","68":"The {10/} dependency is included by each cloud connector, so simply include the connectors for the platforms you want.","69":"Then follow the instructions on using the {0/} API .","70":"{0/} Core","71":"This core library provides programmatic access to application and service information.","72":"This library has no {3/} dependencies and may be used in non-{3/} applications.","73":"This library requires Java 6 or newer.","74":"It is cloud-agnostic;","75":"using the Java SPI, it supports pluggable cloud and service connectors.","76":"Support for {1/} and {4/} is available out-of-the-box, in addition to locally-provided configuration for development and testing.","77":"Connecting to a Cloud","78":"Note","79":"If you are using {0/} in a {3/} application, you should consider automatically injecting {3/} beans instead.","80":"Include the desired cloud connectors on the runtime classpath, as described in the main documentation.","81":"Create a {11/} instance.","82":"Creation of a {12/} instance is a bit expensive, so we recommend using a singleton instance.","83":"If you are using a dependency injection framework such as {3/}, create a bean for the {13/}.","84":"Obtain the {14/} object for the environment in which the application is running.","85":"Note that you must have a {15/} suitable for your deployment environment on your classpath.","86":"For example, if you are deploying the application to {1/}, you must add the {1/} Connector to your classpath.","87":"If no suitable {16/} is found, the {17/} method will throw a {18/}.","88":"Use the {19/} instance to access application and service information and to create service connectors.","89":"{3/} Service Connector","90":"The {3/} Service Connector creates service connection objects for {3/} applications.","91":"It allows for Java or XML configuration of connection beans and currently supports relational databases such as MySQL and PostgreSQL via {20/}, SMTP via {21/}, RabbitMQ via {3/} AMQP, and MongoDB and Redis via {3/} Data projects.","92":"It also provides support for connecting to generic (eg, private) services.","93":"For details on this service connector, see {2/} {3/} Service Connector.","94":"{1/} Connector","95":"The {1/} Connector discovers services bound to an application running in a {1/} environment.","96":"As it consumes bound service information in {1/}'s standard format, it is provider-agnostic;","97":"it currently is aware of application monitoring, DB2, MongoDB, MySQL, Oracle, PostgreSQL, RabbitMQ, Redis, SMTP, and SQL Server services.","98":"For details on this cloud connector, see {2/} {1/} Connector.","99":"{4/} Connector","100":"The {4/} Connector discovers services bound to an application running in {4/}.","101":"It currently is aware of PostgreSQL (provided by {4/}), MySQL (provided by ClearDB), Redis (provided by Redis To Go, Redis Cloud, RedisGreen, openredis, and {4/}), MongoDB (provided by mLab, MongoHQ, and MongoSoup), and RabbitMQ (provided by CloudAMQP).","102":"It can be extended to support additional providers for these services.","103":"For details on this cloud connector, see {2/} {4/} Connector.","104":"local-configuration Connector","105":"This connector provides the ability to configure {0/} services locally for development or testing.","106":"The current implementation reads from Java properties only.","107":"Quick Start","108":"Since service URIs contain passwords and should not be stored in code, this connector does not attempt to read service definitions out of the classpath.","109":"You can provide service definitions as system properties.","110":"You can also provide service definitions from a configuration properties file, either by setting the {22/} system property:","111":"or by providing the bootstrap properties file {23/} on the runtime classpath.","112":"This file will be inspected only for the property named {24/}, and its value will be interpolated from the system properties.","113":"The system properties, or the configuration properties file, should contain an application ID and the desired services in the following format.","114":"The service type is determined by the URI scheme.","115":"The connector will activate if it finds a property (either in the system properties or in the configuration properties file) named {25/}.","116":"Property Sources","117":"This connector first attempts to read the system properties generally and a system property named {26/} specifically.","118":"If the system properties are not readable (if the security manager denies {27/}), then they will be treated as empty.","119":"If a system property named {28/} is found, then that file will be loaded as a property list.","120":"Providing a Bootstrap Properties File","121":"To avoid having to manually configure run configurations or test runners with the path to the configuration properties file, the connector can read a templated filename out of the runtime classpath.","122":"This file must be named {29/} and be located at the classpath root.","123":"For security, the connector will not attempt to read any service URIs out of the file.","124":"If the connector does find the file, it will read the property {30/} and substitute the pattern {31/} with the appropriate value from the system properties.","125":"The most useful option is generally {32/}.","126":"A configuration properties file specified in the system properties will override any bootstrap file that may be available on the classpath.","127":"Property Precedence","128":"To provide the maximum configuration flexibility, the connector will override any properties (both application ID and service definitions) specified in the file at {33/} with system properties defined at runtime.","129":"The connector will log a message at {34/} if you override a service ID.","130":"Activating the Connector","131":"{0/} Core expects exactly one cloud connector to match the runtime environment.","132":"This connector identifies the “local cloud” by the presence of a property, in a configuration properties file or in the system properties, named {35/}.","133":"This property will be used in the {36/}.","134":"Service Definitions","135":"If the connector is activated, it will iterate through all of the available properties for keys matching the pattern {37/}.","136":"Each value is interpreted as a URI to a service, and the type of service is determined from the scheme.","137":"Every standard {38/} is supported.","138":"Instance ID","139":"This connector creates a UUID for use as the instance ID, as Java does not provide any portable mechanism for reliably determining hostnames or PIDs.","140":"Extending {0/}","141":"Besides the built-in service and cloud support and the included {3/} Service Connector, {0/} can be extended to support additional cloud platforms, cloud services, or application frameworks.","142":"See below for details.","143":"Extensibility Overview","144":"As mentioned in the Including Cloud Connectors section, your application can include cloud connectors for multiple cloud platforms.","145":"{0/} Core activates the {39/} for the platform in which the application is running.","146":"That cloud connector's {40/} classes create {41/} objects for the application's services, and the {42/} classes use the {43/} objects to create service connection objects for use in your application.","147":"You can extend {0/} in any of three ways:","148":"Cloud platform support.","149":"Out of the box, {0/} offers support for the {1/} and {4/} platforms.","150":"You can extend {0/} to provide support for other cloud platforms and providers.","151":"{0/} uses the interface to provide cloud platform support.","152":"A {44/} implementation for a particular cloud platform is responsible for detecting when the application is running in that cloud platform, obtaining information about the application from the cloud platform, and obtaining information about the services that are bound to the application.","153":"Cloud service support.","154":"You can extend {0/} to support additional services, including services that are specific to your own environment or application.","155":"{0/} uses two interfaces to provide cloud service support:","156":"A models the information required to connect to the service.","157":"In the case of a database service, a {45/} implementation might include fields for host, port, database name, username, and password;","158":"in the case of a web service, it might include fields for URL and API key.","159":"A creates {46/} objects based on the service information collected by a cloud connector.","160":"A {47/} implementation is specific to a cloud platform.","161":"Application framework support.","162":"The {2/} {3/} Service Connector creates service connectors with {3/} Data data types.","163":"You can extend {0/} to provide service connection objects using another framework.","164":"{0/} uses the interface to provide framework support.","165":"A {48/} creates service connectors using the service connection information provided by a {49/} object.","166":"Adding Cloud Platform Support","167":"To allow {0/} to detect a new cloud platform, add a cloud connector for the platform.","168":"A cloud connector determines whether the application is running in the specific cloud, identifies application information (such as the name and instance ID of the particular running instance), and maps bound services (such as URIs exposed in environment variables) as {50/} objects.","169":"Tip","170":"See the {1/} Connector and {4/} Connector for examples.","171":"{0/} uses the Java SPI to discover available connectors.","172":"Your connector class must implement the  interface, which includes three methods:","173":"{51/}: Determines whether the connector is operating in the cloud for which it provides support.","174":"{0/} Core calls {52/} on each cloud connector included in an application, and activates the first connector that responds {53/}.","175":"{54/}: Returns information about the running application instance.","176":"An {55/} must provide the instance id ({56/}) and application id ({57/}).","177":"Other properties can be added as needed to a {58/} and be returned via {59/}.","178":"{60/}: Returns a {61/} object for each service bound to the application.","179":"{62/} can return an empty {63/} if no services have been bound to the application.","180":"New cloud connectors should list the fully-qualified class name in the provider-configuration file at {64/}.","181":"Adding Service Support","182":"To allow {0/} to discover a new type of service, create a class containing the information necessary to connect to the service.","183":"If your service can be specified via a URI, extend and provide the URI scheme in a call to the {65/} constructor.","184":"The following class will expose information for a {66/} available at {67/}.","185":"After creating the {68/} class, you will need to create a for each cloud platform you want to support.","186":"If you are adding service support for a cloud platform already supported by {0/}, you will probably want to extend the appropriate creator base class(es).","188":"Extend {69/}.","190":"Extend {70/}.","191":"local-configuration","192":"Extend {71/}.","193":"A {72/} often can be as simple as a method that instantiates a new {73/}.","194":"Register your {74/} classes in the appropriate provider-configuration file for your cloud’s {75/} base class.","196":"Add the fully-qualified class name for your creator to {76/}.","198":"Add the fully-qualified class name for your creator to {77/}.","199":"local-configuration","200":"Add the fully-qualified class name for your creator to {78/}.","201":"Adding Framework Support","202":"To allow {0/} to provide framework-specific service objects for supported cloud services, add a service connector for the framework.","203":"A service connector consumes a {79/} for a service discovered by the cloud connector and converts it into the appropriate service object (such as a {80/} in the case of a service definition that represents a SQL database).","204":"Tip","205":"Service connectors can be tightly bound to the framework whose service objects they are creating.","206":"For example, some connectors in the {3/} Service Connector create connection factories defined by {3/} Data, for use in building {3/} Data templates.","207":"Your connector class must implement the  interface, which has three methods:","208":"{81/}: Creates a service connection object from a given {82/} and configuration.","209":"{83/}: Returns the type of the connection object that will be created.","210":"{84/}: Returns the type of the {85/} that the class will accept.","211":"List the fully-qualified connector class names in the provider-configuration file at {86/}.","212":"\nLast updated 2016-03-01 11:13:08 CST\n"},"errors":{},"nouns":{"0":"Spring Cloud Connectors","1":"Cloud Foundry","2":"Spring Cloud","3":"Spring","4":"Heroku"},"name":"spring-cloud-connectors","timestamp":1494151137183});</script></body></html>